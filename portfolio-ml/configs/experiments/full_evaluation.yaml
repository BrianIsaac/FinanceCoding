# Complete Research Evaluation Configuration
# This configuration reproduces all research results for the ML-based portfolio optimization study

name: "Complete ML Portfolio Optimization Research Evaluation"
description: "Full reproduction of all research results including model comparison, statistical testing, and sensitivity analysis"

# Random seed for reproducibility
random_seed: 42

# Model configurations for evaluation
models:
  - name: "hrp"
    config: "configs/models/hrp/default.yaml"
    parameters:
      lookback_days: 756  # 3 years default
      linkage_method: "ward"
      distance_metric: "correlation"
  
  - name: "lstm"
    config: "configs/models/lstm/default.yaml"
    parameters:
      sequence_length: 60
      hidden_size: 128
      num_layers: 2
      dropout: 0.3
      learning_rate: 0.001
      epochs: 100
  
  - name: "gat"
    config: "configs/models/gat/default.yaml"
    parameters:
      attention_heads: 4
      hidden_dim: 128
      graph_construction: "mst"
      learning_rate: 0.001
      epochs: 100

# Baseline models for comparison
baselines:
  - name: "equal_weight"
    description: "Equal weight (1/n) portfolio"
  
  - name: "market_cap_weight"
    description: "Market capitalization weighted portfolio"
  
  - name: "mean_variance"
    description: "Classical mean-variance optimization"

# Evaluation configuration
evaluation:
  # Rolling backtest parameters
  backtest:
    start_date: "2016-01-01"
    end_date: "2024-12-31"
    training_window: 756  # 3 years in trading days
    validation_window: 252  # 1 year
    rebalance_frequency: "monthly"  # End of month rebalancing
    transaction_cost_bps: 10.0  # 10 basis points
    
  # Statistical testing configuration
  statistical_tests:
    significance_level: 0.05
    bootstrap_iterations: 10000
    confidence_level: 0.95
    correction_method: "holm_sidak"  # Multiple comparison correction
    
    # Specific tests to perform
    tests:
      - "sharpe_ratio_comparison"  # Jobson-Korkie test
      - "information_ratio_test"
      - "maximum_drawdown_test"
      - "risk_adjusted_returns"
  
  # Performance metrics to calculate
  performance_metrics:
    - "sharpe_ratio"
    - "information_ratio"
    - "calmar_ratio"
    - "sortino_ratio"
    - "maximum_drawdown"
    - "var_5_percent"
    - "cvar_5_percent"
    - "volatility"
    - "cagr"
    - "alpha"
    - "beta"
  
  # Market regime analysis
  market_regimes:
    enable: true
    regime_definitions:
      bull_market: "sp500_returns > 0.10"
      bear_market: "sp500_returns < -0.10"
      high_volatility: "sp500_volatility > 0.20"
      sideways: "default"

# Sensitivity analysis configuration
sensitivity_analysis:
  enable: true
  
  # Parameter grids for sensitivity testing
  parameter_grids:
    hrp:
      lookback_days: [252, 504, 756, 1008]
      linkage_method: ["single", "complete", "average", "ward"]
      distance_metric: ["correlation", "angular", "absolute_correlation"]
    
    lstm:
      sequence_length: [30, 45, 60, 90]
      hidden_size: [64, 128, 256]
      num_layers: [1, 2, 3]
      dropout: [0.1, 0.3, 0.5]
      learning_rate: [0.0001, 0.001, 0.01]
    
    gat:
      attention_heads: [2, 4, 8]
      hidden_dim: [64, 128, 256]
      graph_construction: ["k_nn", "mst", "tmfg"]
      learning_rate: [0.0001, 0.001, 0.01]
  
  # Transaction cost sensitivity
  transaction_costs:
    cost_levels: [5.0, 10.0, 20.0]  # basis points
    analyze_ranking_stability: true
  
  # Portfolio size sensitivity
  portfolio_sizes:
    top_k_values: [20, 30, 50, 75, 100]
    analyze_diversification_tradeoff: true

# Output configuration
output:
  results_dir: "results/full_evaluation"
  generate_report: true
  
  # Export formats
  export_formats:
    - "html"      # Interactive HTML report
    - "csv"       # CSV data export
    - "latex"     # LaTeX tables for publication
  
  # Report sections to include
  report_sections:
    - "executive_summary"
    - "methodology"
    - "performance_analysis"
    - "statistical_tests"
    - "sensitivity_analysis"
    - "market_regime_analysis"
    - "implementation_notes"
    - "limitations_future_work"
  
  # Interactive dashboard configuration
  dashboard:
    enable: true
    include_drill_down: true
    real_time_updates: false

# Computational resource configuration
resources:
  # GPU configuration
  gpu:
    enabled: true
    device_id: 0
    max_memory_fraction: 0.9
    memory_growth: true
  
  # CPU configuration
  cpu:
    num_workers: 8
    parallel_model_training: true
  
  # Memory management
  memory:
    max_ram_gb: 32
    efficient_data_loading: true
    cache_intermediate_results: true

# Quality assurance and validation
quality_assurance:
  # Data validation
  data_validation:
    min_coverage_percent: 95.0
    max_missing_percent: 10.0
    outlier_detection: true
    temporal_integrity_check: true
  
  # Result validation
  result_validation:
    performance_sanity_checks: true
    statistical_test_validation: true
    reproducibility_check: true
  
  # Error handling
  error_handling:
    continue_on_model_failure: true
    save_error_logs: true
    email_notifications: false

# Logging configuration
logging:
  level: "INFO"
  save_to_file: true
  include_timestamps: true
  log_model_training: true
  log_performance_metrics: true